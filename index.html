<!DOCTYPE html>
<html>
<head>
    <title>Hz Generator v3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="css/main.css"/>
    <style>
        .container {
            margin-top: 50px;
            max-width: 600px;
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            animation: fadeIn 2s forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }
        .rounded-input {
            border-radius: 10px;
        }
        .slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 15px;
            border-radius: 10px;
            background: #d3d3d3;
            outline: none;
            opacity: 0.7;
            -webkit-transition: .2s;
            transition: opacity .2s;
        }
        .slider:hover {
            opacity: 1;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
        }
        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
        }
        .btn {
            transition: transform 0.2s, background-color 0.2s;
            margin: 5px;
        }
        .btn:hover {
            transform: scale(1.1);
        }
        .btn-primary:hover {
            background-color: #0056b3;
        }
        .btn-danger:hover {
            background-color: #c82333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center">Hz Generator</h1>
        <div class="form-group">
            <label for="frequency">Frequency (Hz):</label>
            <input type="number" id="freqInput" class="form-control rounded-input" min="1" max="20000" value="440">
            <input type="range" class="form-control-range slider" id="frequency" min="1" max="20000" value="440">
        </div>
        <div class="form-group">
            <label for="volume">Volume:</label>
            <input type="range" class="form-control-range slider" id="volume" min="0" max="100" value="50">
        </div>
        <div class="text-center">
            <button id="playButton" class="btn btn-primary rounded-pill">Play</button>
            <button id="stopButton" class="btn btn-danger rounded-pill">Stop</button>
        </div>
        <div class="text-center mt-3">
            <button class="btn btn-secondary rounded-pill preset-button" data-frequency="10000">10000 Hz</button>
            <button class="btn btn-secondary rounded-pill preset-button" data-frequency="15000">15000 Hz</button>
            <button class="btn btn-secondary rounded-pill preset-button" data-frequency="16000">16000 Hz</button>
            <button class="btn btn-secondary rounded-pill preset-button" data-frequency="17000">17000 Hz</button>
            <button class="btn btn-secondary rounded-pill preset-button" data-frequency="20000">20000 Hz</button>
        </div>

        <!-- Random Hz Generator Section -->
        <div class="container mt-5">
            <h2 class="text-center">Random Hz Generator</h2>
            <div class="form-group">
                <label for="minHz">Min Hz:</label>
                <input type="number" id="minHz" class="form-control rounded-input" min="1" max="20000" value="1">
                <label for="maxHz">Max Hz:</label>
                <input type="number" id="maxHz" class="form-control rounded-input" min="1" max="20000" value="20000">
            </div>
            <div class="text-center">
                <button id="startRandomHz" class="btn btn-success rounded-pill">Start Random Hz Generator</button>
                <button id="stopRandomHz" class="btn btn-warning rounded-pill">Stop Random Hz Generator</button>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="js/my-javascript.js"></script>
    <script>
        let audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let oscillator;
        let gainNode = audioContext.createGain();
        let randomHzInterval;

        document.getElementById('frequency').addEventListener('input', function() {
            document.getElementById('freqInput').value = this.value;
            if (oscillator) {
                oscillator.frequency.setValueAtTime(this.value, audioContext.currentTime);
            }
        });

        document.getElementById('freqInput').addEventListener('input', function() {
            document.getElementById('frequency').value = this.value;
            if (oscillator) {
                oscillator.frequency.setValueAtTime(this.value, audioContext.currentTime);
            }
        });

        document.getElementById('volume').addEventListener('input', function() {
            gainNode.gain.setValueAtTime(this.value / 100, audioContext.currentTime);
        });

        document.getElementById('playButton').addEventListener('click', function() {
            if (!oscillator) {
                oscillator = audioContext.createOscillator();
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(document.getElementById('frequency').value, audioContext.currentTime);
                oscillator.connect(gainNode).connect(audioContext.destination);
                oscillator.start();
            }
        });

        document.getElementById('stopButton').addEventListener('click', function() {
            if (oscillator) {
                oscillator.stop();
                oscillator = null;
            }
        });

        document.querySelectorAll('.preset-button').forEach(button => {
            button.addEventListener('click', function() {
                const frequency = this.getAttribute('data-frequency');
                document.getElementById('frequency').value = frequency;
                document.getElementById('freqInput').value = frequency;
                if (oscillator) {
                    oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                }
            });
        });

        // Random Hz Generator Functionality
        document.getElementById('startRandomHz').addEventListener('click', function() {
            const minHz = parseInt(document.getElementById('minHz').value);
            const maxHz = parseInt(document.getElementById('maxHz').value);
            if (!randomHzInterval) {
                randomHzInterval = setInterval(() => {
                    const randomHz = Math.floor(Math.random() * (maxHz - minHz + 1)) + minHz;
                    document.getElementById('frequency').value = randomHz;
                    document.getElementById('freqInput').value = randomHz;
                    if (oscillator) {
                        oscillator.frequency.setValueAtTime(randomHz, audioContext.currentTime);
                    }
                }, 10); // Change frequency every second
            }
        });

        document.getElementById('stopRandomHz').addEventListener('click', function() {
            if (randomHzInterval) {
                clearInterval(randomHzInterval);
                randomHzInterval = null;
            }
        });
    </script>
</body>
</html>
